<!doctype html><html lang=es><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Mis notas</title><meta name=renderer content=webkit><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content=no-transform><meta http-equiv=cache-control content=no-siteapp><meta name=theme-color content=#f8f5ec><meta name=msapplication-navbutton-color content=#f8f5ec><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=#f8f5ec><meta name=author content="Juan Asensio"><meta name=description content="Mis notas, by okelet"><meta name=keywords content=okelet,linux,bash,python,aws,google,cloud,gcloud><meta name=generator content="Hugo 0.54.0 with even 4.0.0"><link rel=canonical href=https://okelet.netlify.com/><link href=https://okelet.netlify.com/atom.xml type=application/atom+xml rel=alternate title="Mis notas - Atom"><link href=https://okelet.netlify.com/index.xml type=application/rss+xml rel=alternate title="Mis notas - RSS"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/dist/even.c2a46f00.min.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><link rel=stylesheet href=https://okelet.netlify.com/css/custom.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.9.0/css/all.css><meta property=og:title content="Mis notas"><meta property=og:description content="Mis notas, by okelet"><meta property=og:type content=website><meta property=og:url content=https://okelet.netlify.com/><meta property=og:updated_time content=2020-01-18T00:00:00&#43;00:00><meta itemprop=name content="Mis notas"><meta itemprop=description content="Mis notas, by okelet"><meta name=twitter:card content=summary><meta name=twitter:title content="Mis notas"><meta name=twitter:description content="Mis notas, by okelet"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--><link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css><script src=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js></script><script>window.addEventListener("load",function(){window.cookieconsent.initialise({"palette":{"popup":{"background":"#000"},"button":{"background":"#f1d600"}},"theme":"classic"})});</script></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Mis notas</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Inicio</li></a><a href=/posts/><li class=mobile-menu-item>Archivos</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/pages/projects/><li class=mobile-menu-item>Proyectos</li></a><a href=/pages/about/><li class=mobile-menu-item>Acerca de</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Mis notas</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Inicio</a></li><li class=menu-item><a class=menu-item-link href=/posts/>Archivos</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/pages/projects/>Proyectos</a></li><li class=menu-item><a class=menu-item-link href=/pages/about/>Acerca de</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><section id=posts class=posts><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2020/01/configurar-microk8s-para-usar-repositorios-de-aws-ecr/>Configurar Microk8s para usar repositorios de AWS ECR</a></h1><div class=post-meta><span class=post-time>2020-01-18</span></div></header><div class=post-content><div class=post-summary>Continuando con un post anterior de cómo probar Ansible AWX con Microk8s (en AWS EC2). Bueno, pues resulta que me creé una imagen personalizada para el contener awx_task para instalar una serie de librerías y comandos que necesitaba para lanzar unos playbooks; el fichero Dockerfile es similar a éste:
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 FROM ansible/awx_task:9.</div><div class=read-more><a href=/posts/2020/01/configurar-microk8s-para-usar-repositorios-de-aws-ecr/ class=read-more-link>Leer mas..</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2019/09/monitorizar-memoria-y-errores-de-funciones-lambda/>Monitorizar memoria y errores de funciones Lambda</a></h1><div class=post-meta><span class=post-time>2019-09-01</span></div></header><div class=post-content><div class=post-summary><p>A la hora de monitorizar estadísticas sobre la ejecución de nuestras funciones Lambda, Cloudwatch ya nos ofrece algunas <em>builtin</em> como:</p><ul><li>Cantidad de <em>throttles</em></li><li>Número de invocaciones</li><li>Número de errores &ldquo;genéricos&rdquo;</li><li>Duración (media y total)</li></ul><p>Pero si queremos ver estadísticas sobre memoria o errores según sean por consumo excesivo de memoria o por timeout, no los tenemos disponibles por defecto.</p></div><div class=read-more><a href=/posts/2019/09/monitorizar-memoria-y-errores-de-funciones-lambda/ class=read-more-link>Leer mas..</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2019/07/usando-caddy-para-desarollo-local-en-php/>Usando caddy para desarollo local en PHP</a></h1><div class=post-meta><span class=post-time>2019-07-15</span></div></header><div class=post-content><div class=post-summary><p>Durante el desarrollo en local de nuestra aplicación en PHP (con el framework <a href=https://cakephp.org/>CakePHP</a>) solíamos usar el servidor que venía por defecto:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>bin/cake server</code></pre></td></tr></table></div></div><p>El problema de esto (que por debajo usa el <a href=https://www.php.net/manual/en/features.commandline.webserver.php>servidor <em>embedido</em> de PHP</a>), es que es mono-hilo, es decir, que sirve sólo una petición a la vez, por lo que a veces la carga de la web se hacía bastante pesada.</p></div><div class=read-more><a href=/posts/2019/07/usando-caddy-para-desarollo-local-en-php/ class=read-more-link>Leer mas..</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2019/06/crear-usuario-y-base-de-datos-en-postgres-y-dar-permisos/>Crear usuario y base de datos en Postgres y dar permisos</a></h1><div class=post-meta><span class=post-time>2019-06-23</span></div></header><div class=post-content><div class=post-summary><p>Una cosa que siempre se me olvida y tengo que buscar (como con <a href=/posts/2019/06/crear-usuario-y-base-de-datos-en-mysql-y-dar-permisos/>MySQL</a>): cómo crear un usuario en Postgres, crear una base de datos, y dar permisos al usuario sobre esa base de datos:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>psql -U postgres</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-sql data-lang=sql><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sql data-lang=sql><span class=k>create</span> <span class=k>database</span> <span class=n>mydb</span> <span class=k>ENCODING</span> <span class=s1>&#39;UTF8&#39;</span><span class=p>;</span>
<span class=k>create</span> <span class=k>user</span> <span class=n>myuser</span> <span class=k>with</span> <span class=k>encrypted</span> <span class=n>password</span> <span class=s1>&#39;mypass&#39;</span><span class=p>;</span>
<span class=k>grant</span> <span class=k>all</span> <span class=k>privileges</span> <span class=k>on</span> <span class=k>database</span> <span class=n>mydb</span> <span class=k>to</span> <span class=n>myuser</span><span class=p>;</span></code></pre></td></tr></table></div></div></div><div class=read-more><a href=/posts/2019/06/crear-usuario-y-base-de-datos-en-postgres-y-dar-permisos/ class=read-more-link>Leer mas..</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2019/06/probando-ansible-awx-con-microk8s/>Probando Ansible AWX con MicroK8s</a></h1><div class=post-meta><span class=post-time>2019-06-19</span></div></header><div class=post-content><div class=post-summary><p>AVISO: Post largo (intro a Ansible, AWX, MicroK8s)</p><p>Actualización 2020-01-14: Actualizado a <a href=https://groups.google.com/forum/#!topic/awx-project/aYYtuAuHMzY>Ansible AWX 9.1.1</a></p><p>Ansible (<em>/ánsibol/</em>) es el gestor de configuración de moda, y por méritos propios. Aunque no es perfecto (en determinadas ocasiones se puede preferir un modelo cliente/servidor en lugar de una conexión SSH <em>ad-hoc</em>), ofrece una buena combinación entre funcionalidad y simplicidad. Siempre y cuando tengamos conectividad SSH con la máquina a gestionar (o no, a través de <a href=https://docs.aws.amazon.com/es_es/quickstart/latest/linux-bastion/architecture.html>bastiones</a>), en el caso de equipos Linux, o conectividad WinRM o o PSRP para equipos Windows, podremos realizar infinidad de acciones o tareas sobre las máquinas a gestionar.</p><p>Uno de los problemas de Ansible (hablando correctamente, <a href=https://www.ansible.com/blog/red-hat-ansible-automation-engine-vs-tower>Ansible Engine</a>) es que no tiene una forma de ejecutar de forma automatizada playbooks, para mantener la configuración sincronizada de forma periódica, ejecutar tareas planificadas o incluso auto-provisionar equipos. Aquí es donde entra Ansible Tower, que es la versión con soporte de <a href=https://github.com/ansible/awx>Ansible AWX</a>, al estilo de lo que Red Hat hace con Wildfly y JBoss. Ansible Tower/AWX en básicamente una API REST con una interfaz web que se comunica con ella. Utilizando esta API, se pueden definir inventarios, credenciales, equipos, plantillas de trabajo, flujos de trabajo, etc. así como asignar permisos por usarios/grupos mediante su sistema RBAC.</p></div><div class=read-more><a href=/posts/2019/06/probando-ansible-awx-con-microk8s/ class=read-more-link>Leer mas..</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2019/06/crear-un-rol-personalizado-en-google-cloud-para-encendido-y-apagado-de-m%C3%A1quinas/>Crear un rol personalizado en Google Cloud para encendido y apagado de máquinas</a></h1><div class=post-meta><span class=post-time>2019-06-18</span></div></header><div class=post-content><div class=post-summary><p>Es posible que queramos delegar ciertas tareas de administración sobre elementos de Google
Cloud a usuarios o departamentos, y que no existan roles predefinidos que hagan exactamente
lo que necesitamos. Para eso están los roles personalizados, similar a las políticas de IAM
de AWS.</p><p>Por ejemplo, para crear un rol que permita a un usuario apagar, encender y reinicar máquinas
virtuales, podemos crear un rol como el siguiente:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>gcloud iam roles create StartStopVms --project <span class=si>${</span><span class=nv>GOOGLE_CLOUD_PROJECT</span><span class=si>}</span> <span class=se>\
</span><span class=se></span>    --title StartStopVms --description <span class=s2>&#34;Can start, stop, suspend, resume and reset VMs&#34;</span> <span class=se>\
</span><span class=se></span>    --stage GA --permissions compute.instances.start,compute.instances.stop,compute.instances.suspend,compute.instances.resume,compute.instances.reset</code></pre></td></tr></table></div></div></div><div class=read-more><a href=/posts/2019/06/crear-un-rol-personalizado-en-google-cloud-para-encendido-y-apagado-de-m%C3%A1quinas/ class=read-more-link>Leer mas..</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2019/06/python-es-el-lenguaje-m%C3%A1s-popular-hoy-por-hoy/>Python es el lenguaje más popular hoy por hoy</a></h1><div class=post-meta><span class=post-time>2019-06-17</span></div></header><div class=post-content><div class=post-summary><p>Existe una medida, llamada índice TIOBE, que valora qué lenguajes de programación son más populares. Los datos salen de los foros de discusión técnicos en donde se observan cuantos internautas cambian impresiones sobre los diferentes lenguajes de programación. Ahora, en junio, el índica TIOBE ha sido publicado y revela que Python es el lenguaje más popular.</p></div><div class=read-more><a href=/posts/2019/06/python-es-el-lenguaje-m%C3%A1s-popular-hoy-por-hoy/ class=read-more-link>Leer mas..</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2019/06/crear-custom-runtime-para-php-en-aws-lambda/>Crear custom runtime para PHP en AWS Lambda</a></h1><div class=post-meta><span class=post-time>2019-06-11</span></div></header><div class=post-content><div class=post-summary><p>Actualización 2019-06-27: Añadida extensión para MongoDB.</p><p>En el proyecto que estamos desarrollando, tenemos algunas funciones Lambda en Python, con las que no tenemos problemas (por ahora); las dependencias de estas funciones Python las gestionamos con <a href=https://docs.pipenv.org/en/latest/>pipenv</a>.</p><p>Pero dado que el frontend está desarrollado en PHP, hay veces que necesitamos acceder a determinadas propiedades y funciones desde las funciones Lambda, y nos planteamos migrar o desarrollar nuevas funciones Lambda en PHP. Esto no era posible hasta que hace unos meses, AWS anunció el soporte de <a href=https://aws.amazon.com/es/blogs/apn/aws-lambda-custom-runtime-for-php-a-practical-example/><em>custom runtimes</em></a>, que básicamente consiste en subir el ejecutable con un determinado nombre.</p></div><div class=read-more><a href=/posts/2019/06/crear-custom-runtime-para-php-en-aws-lambda/ class=read-more-link>Leer mas..</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2019/06/crear-usuario-y-base-de-datos-en-mysql-y-dar-permisos/>Crear usuario y base de datos en MySQL y dar permisos</a></h1><div class=post-meta><span class=post-time>2019-06-11</span></div></header><div class=post-content><div class=post-summary><p>Una cosa que siempre se me olvida y tengo que buscar: cómo crear un usuario en MySQL (o MariaDB o Aurora MySQL), crear una base de datos, y dar permisos al usuario sobre esa base de datos:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-sql data-lang=sql><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sql data-lang=sql><span class=k>CREATE</span> <span class=k>DATABASE</span> <span class=n>wordpress</span> <span class=nb>CHARACTER</span> <span class=k>SET</span> <span class=n>utf8mb4</span> <span class=k>COLLATE</span> <span class=n>utf8mb4_unicode_ci</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>USER</span> <span class=s1>&#39;wpuser&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span> <span class=n>IDENTIFIED</span> <span class=k>BY</span> <span class=s1>&#39;pickApassword&#39;</span><span class=p>;</span>
<span class=k>GRANT</span> <span class=k>ALL</span> <span class=k>PRIVILEGES</span> <span class=k>ON</span> <span class=n>wordpress</span><span class=p>.</span><span class=o>*</span> <span class=k>TO</span> <span class=s1>&#39;wpuser&#39;</span><span class=o>@</span><span class=s1>&#39;localhost&#39;</span><span class=p>;</span>
<span class=n>FLUSH</span> <span class=k>PRIVILEGES</span><span class=p>;</span>
<span class=n>exit</span></code></pre></td></tr></table></div></div></div><div class=read-more><a href=/posts/2019/06/crear-usuario-y-base-de-datos-en-mysql-y-dar-permisos/ class=read-more-link>Leer mas..</a></div></div></article><article class=post><header class=post-header><h1 class=post-title><a class=post-link href=/posts/2019/05/parsear-maintenancewindow-de-rds-en-python/>Parsear MaintenanceWindow de RDS en Python</a></h1><div class=post-meta><span class=post-time>2019-05-20</span></div></header><div class=post-content><div class=post-summary><p>Para una aplicación que estamos desarrollando, necesitábamos saber cuándo se van a aplicar los mantenimientos en nuestras instancias de RDS. El problema es que según <a href=https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/rds.html#RDS.Client.describe_pending_maintenance_actions>la documentación de Boto3</a>, el método <code>describe_pending_maintenance_actions</code> devuelve la fecha de aplicación de la actualización en el campo <code>CurrentApplyDate</code>, pero esto siempre viene vacío:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ aws rds describe-pending-maintenance-actions</code></pre></td></tr></table></div></div></div><div class=read-more><a href=/posts/2019/05/parsear-maintenancewindow-de-rds-en-python/ class=read-more-link>Leer mas..</a></div></div></article></section><nav class=pagination><a class=next href=/page/2/><span class=next-text>Siguiente</span>
<i class="iconfont icon-right"></i></a></nav></div></div></main><footer id=footer class=footer><div class=social-links><a href=https://stackoverflow.com/users/576138/okelet class="iconfont icon-stack-overflow" title=stack-overflow></a><a href=https://www.linkedin.com/in/okelet/ class="iconfont icon-linkedin" title=linkedin></a><a href=https://github.com/okelet/ class="iconfont icon-github" title=github></a><a href=https://gitlab.com/okelet class="iconfont icon-gitlab" title=gitlab></a><a href=https://okelet.netlify.com/atom.xml type=application/atom+xml class="iconfont icon-rss" title="Atom feed"></a></div><div class=copyright><span class=power-by>Creado con <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Tema -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2017 -
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Juan Asensio</span></span></div><script type=text/javascript>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
(window,document,"script","https://mc.yandex.ru/metrika/tag.js","ym");ym(54019648,"init",{clickmap:true,trackLinks:true,accurateTrackBounce:true});</script><noscript><div><img src=https://mc.yandex.ru/watch/54019648 style=position:absolute;left:-9999px alt></div></noscript></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script><script>var languageCode="es".replace(/-/g,'_').replace(/_(.*)/,function($0,$1){return $0.replace($1,$1.toUpperCase());});timeago().render(document.querySelectorAll('.timeago'),languageCode);timeago.cancel();</script><script type=text/javascript src=/dist/even.26188efa.min.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-53728915-2','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=/js/custom.js></script></body></html>